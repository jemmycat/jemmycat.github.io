<head><head><meta charset=utf-8><meta name=viewport content="width=device-width"><link rel=stylesheet href=https://jemmycat.github.io/css/style.css><link rel=stylesheet href=https://jemmycat.github.io/css/post-list.css><link rel=stylesheet href=https://jemmycat.github.io/css/single.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css><title>博客设计规范 - 石の家</title></head></head><div class=container><header><div class=profile-header><img src=https://jemmycat.github.io/images/avatar.png alt="User Avatar" class=profile-avatar><div class=profile-info><h1 class=profile-name>Jemmy</h1><p class=profile-status>豆豆柴 水晶塔</p><p class=profile-level>LV1 进阶冒险者 | UID: 10358885</p><p class=profile-description>35岁玩家，喜欢海岛冒险的相机和咖啡爱好者。忙碌于拯救攻城怪物，还没来得及好好介绍自己。</p></div></div></header><main><div class=main-wrapper><div class=sidebar><button class=sidebar-btn>
<a href=/about>我的角色</a>
</button>
<button class=sidebar-btn>
<a href=/>我的记录</a>
</button>
<button class=sidebar-btn>
<a href=/status/>我的动态</a>
</button>
<button class=sidebar-btn>
<a href=/games/>我的游戏</a>
</button>
<button class=sidebar-btn>
<a href=/workout>我的运动</a></button></div><div class=posts-content><div class=posts><header><h1 class=post-title>博客设计规范</h1><p class=post-meta>October 19, 2024 · By</p></header><article><article class=post><section class=post-body><aside class=toc><h2>目录</h2><nav id=TableOfContents><ul><li><ul><li><a href=#1-数据库表结构设计>1. 数据库表结构设计</a></li><li><a href=#2-数据库设计考虑事项>2. 数据库设计考虑事项</a></li><li><a href=#3-其他功能扩展>3. 其他功能扩展</a></li><li><a href=#4-关系图>4. 关系图</a></li></ul></li></ul></nav></aside><p><p>设计博客系统的数据库架构需要考虑多方面的因素，包括用户管理、文章管理、评论系统、标签分类、权限管理、点赞等功能模块。下面是一个典型的博客数据库设计方案，涵盖了常见的功能模块。</p><h3 id=1-数据库表结构设计>1. 数据库表结构设计</h3><p>数据库表的设计围绕以下几大核心模块：用户管理、文章管理、分类与标签、评论系统、权限管理等。</p><h4 id=11-用户表-users>1.1 用户表 (Users)</h4><p><strong>作用</strong>：存储博客用户的信息。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> Users (
</span></span><span style=display:flex><span>    user_id        INT AUTO_INCREMENT <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span>,
</span></span><span style=display:flex><span>    username       VARCHAR(<span style=color:#ae81ff>50</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>UNIQUE</span>,
</span></span><span style=display:flex><span>    email          VARCHAR(<span style=color:#ae81ff>100</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>UNIQUE</span>,
</span></span><span style=display:flex><span>    password_hash  VARCHAR(<span style=color:#ae81ff>255</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,
</span></span><span style=display:flex><span>    bio            TEXT,
</span></span><span style=display:flex><span>    profile_image  VARCHAR(<span style=color:#ae81ff>255</span>),  <span style=color:#75715e>-- 用户头像
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    created_at     <span style=color:#66d9ef>TIMESTAMP</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#66d9ef>CURRENT_TIMESTAMP</span>,
</span></span><span style=display:flex><span>    updated_at     <span style=color:#66d9ef>TIMESTAMP</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#66d9ef>CURRENT_TIMESTAMP</span> <span style=color:#66d9ef>ON</span> <span style=color:#66d9ef>UPDATE</span> <span style=color:#66d9ef>CURRENT_TIMESTAMP</span>
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><p><strong>字段解释</strong>：</p><ul><li><code>user_id</code>: 用户的唯一标识符。</li><li><code>username</code>: 用户名。</li><li><code>email</code>: 用户的电子邮箱。</li><li><code>password_hash</code>: 加密的用户密码。</li><li><code>bio</code>: 用户的个人简介。</li><li><code>profile_image</code>: 个人头像的存储路径。</li></ul><h4 id=12-文章表-posts>1.2 文章表 (Posts)</h4><p><strong>作用</strong>：存储博客的文章内容。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> Posts (
</span></span><span style=display:flex><span>    post_id        INT AUTO_INCREMENT <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span>,
</span></span><span style=display:flex><span>    user_id        INT <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,  <span style=color:#75715e>-- 关联到Users表
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    title          VARCHAR(<span style=color:#ae81ff>255</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,
</span></span><span style=display:flex><span>    content        TEXT <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,
</span></span><span style=display:flex><span>    slug           VARCHAR(<span style=color:#ae81ff>255</span>) <span style=color:#66d9ef>UNIQUE</span>,  <span style=color:#75715e>-- 文章的SEO友好URL
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    is_published   BOOLEAN <span style=color:#66d9ef>DEFAULT</span> <span style=color:#66d9ef>TRUE</span>,
</span></span><span style=display:flex><span>    created_at     <span style=color:#66d9ef>TIMESTAMP</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#66d9ef>CURRENT_TIMESTAMP</span>,
</span></span><span style=display:flex><span>    updated_at     <span style=color:#66d9ef>TIMESTAMP</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#66d9ef>CURRENT_TIMESTAMP</span> <span style=color:#66d9ef>ON</span> <span style=color:#66d9ef>UPDATE</span> <span style=color:#66d9ef>CURRENT_TIMESTAMP</span>,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>FOREIGN</span> <span style=color:#66d9ef>KEY</span> (user_id) <span style=color:#66d9ef>REFERENCES</span> Users(user_id) <span style=color:#66d9ef>ON</span> <span style=color:#66d9ef>DELETE</span> <span style=color:#66d9ef>CASCADE</span>
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><p><strong>字段解释</strong>：</p><ul><li><code>post_id</code>: 文章的唯一标识符。</li><li><code>user_id</code>: 关联用户，表示文章的作者。</li><li><code>title</code>: 文章标题。</li><li><code>content</code>: 文章正文。</li><li><code>slug</code>: 文章的URL友好标识符（SEO优化）。</li><li><code>is_published</code>: 标识文章是否已发布。</li><li><code>created_at</code> 和 <code>updated_at</code>: 文章的创建时间和更新时间。</li></ul><h4 id=13-分类表-categories>1.3 分类表 (Categories)</h4><p><strong>作用</strong>：存储文章分类。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> Categories (
</span></span><span style=display:flex><span>    category_id    INT AUTO_INCREMENT <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span>,
</span></span><span style=display:flex><span>    name           VARCHAR(<span style=color:#ae81ff>50</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>UNIQUE</span>,
</span></span><span style=display:flex><span>    description    VARCHAR(<span style=color:#ae81ff>255</span>)
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><p><strong>字段解释</strong>：</p><ul><li><code>category_id</code>: 分类的唯一标识符。</li><li><code>name</code>: 分类名称。</li><li><code>description</code>: 分类描述。</li></ul><h4 id=14-标签表-tags>1.4 标签表 (Tags)</h4><p><strong>作用</strong>：存储文章的标签信息，文章可以有多个标签。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> Tags (
</span></span><span style=display:flex><span>    tag_id         INT AUTO_INCREMENT <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span>,
</span></span><span style=display:flex><span>    name           VARCHAR(<span style=color:#ae81ff>50</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>UNIQUE</span>
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><p><strong>字段解释</strong>：</p><ul><li><code>tag_id</code>: 标签的唯一标识符。</li><li><code>name</code>: 标签名称。</li></ul><h4 id=15-文章-标签关联表-post_tags>1.5 文章-标签关联表 (Post_Tags)</h4><p><strong>作用</strong>：管理文章和标签之间的多对多关系。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> Post_Tags (
</span></span><span style=display:flex><span>    post_id        INT,
</span></span><span style=display:flex><span>    tag_id         INT,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span> (post_id, tag_id),
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>FOREIGN</span> <span style=color:#66d9ef>KEY</span> (post_id) <span style=color:#66d9ef>REFERENCES</span> Posts(post_id) <span style=color:#66d9ef>ON</span> <span style=color:#66d9ef>DELETE</span> <span style=color:#66d9ef>CASCADE</span>,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>FOREIGN</span> <span style=color:#66d9ef>KEY</span> (tag_id) <span style=color:#66d9ef>REFERENCES</span> Tags(tag_id) <span style=color:#66d9ef>ON</span> <span style=color:#66d9ef>DELETE</span> <span style=color:#66d9ef>CASCADE</span>
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><p><strong>字段解释</strong>：</p><ul><li><code>post_id</code>: 文章ID，关联到<code>Posts</code>表。</li><li><code>tag_id</code>: 标签ID，关联到<code>Tags</code>表。</li></ul><h4 id=16-评论表-comments>1.6 评论表 (Comments)</h4><p><strong>作用</strong>：存储文章的评论信息。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> Comments (
</span></span><span style=display:flex><span>    comment_id     INT AUTO_INCREMENT <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span>,
</span></span><span style=display:flex><span>    post_id        INT <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,  <span style=color:#75715e>-- 关联到Posts表
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    user_id        INT <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,  <span style=color:#75715e>-- 关联到Users表
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    parent_id      INT,  <span style=color:#75715e>-- 用于管理嵌套评论，如果是顶级评论则为空
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    content        TEXT <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,
</span></span><span style=display:flex><span>    created_at     <span style=color:#66d9ef>TIMESTAMP</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#66d9ef>CURRENT_TIMESTAMP</span>,
</span></span><span style=display:flex><span>    updated_at     <span style=color:#66d9ef>TIMESTAMP</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#66d9ef>CURRENT_TIMESTAMP</span> <span style=color:#66d9ef>ON</span> <span style=color:#66d9ef>UPDATE</span> <span style=color:#66d9ef>CURRENT_TIMESTAMP</span>,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>FOREIGN</span> <span style=color:#66d9ef>KEY</span> (post_id) <span style=color:#66d9ef>REFERENCES</span> Posts(post_id) <span style=color:#66d9ef>ON</span> <span style=color:#66d9ef>DELETE</span> <span style=color:#66d9ef>CASCADE</span>,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>FOREIGN</span> <span style=color:#66d9ef>KEY</span> (user_id) <span style=color:#66d9ef>REFERENCES</span> Users(user_id) <span style=color:#66d9ef>ON</span> <span style=color:#66d9ef>DELETE</span> <span style=color:#66d9ef>CASCADE</span>,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>FOREIGN</span> <span style=color:#66d9ef>KEY</span> (parent_id) <span style=color:#66d9ef>REFERENCES</span> Comments(comment_id) <span style=color:#66d9ef>ON</span> <span style=color:#66d9ef>DELETE</span> <span style=color:#66d9ef>CASCADE</span>
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><p><strong>字段解释</strong>：</p><ul><li><code>comment_id</code>: 评论的唯一标识符。</li><li><code>post_id</code>: 关联到评论的文章。</li><li><code>user_id</code>: 发表评论的用户。</li><li><code>parent_id</code>: 如果是回复评论，这里保存父评论的ID。</li><li><code>content</code>: 评论的内容。</li><li><code>created_at</code> 和 <code>updated_at</code>: 评论的创建和更新时间。</li></ul><h4 id=17-点赞表-likes>1.7 点赞表 (Likes)</h4><p><strong>作用</strong>：存储用户对文章的点赞信息。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> Likes (
</span></span><span style=display:flex><span>    like_id        INT AUTO_INCREMENT <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span>,
</span></span><span style=display:flex><span>    post_id        INT <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,  <span style=color:#75715e>-- 关联到Posts表
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    user_id        INT <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,  <span style=color:#75715e>-- 关联到Users表
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    created_at     <span style=color:#66d9ef>TIMESTAMP</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#66d9ef>CURRENT_TIMESTAMP</span>,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>FOREIGN</span> <span style=color:#66d9ef>KEY</span> (post_id) <span style=color:#66d9ef>REFERENCES</span> Posts(post_id) <span style=color:#66d9ef>ON</span> <span style=color:#66d9ef>DELETE</span> <span style=color:#66d9ef>CASCADE</span>,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>FOREIGN</span> <span style=color:#66d9ef>KEY</span> (user_id) <span style=color:#66d9ef>REFERENCES</span> Users(user_id) <span style=color:#66d9ef>ON</span> <span style=color:#66d9ef>DELETE</span> <span style=color:#66d9ef>CASCADE</span>
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><p><strong>字段解释</strong>：</p><ul><li><code>like_id</code>: 点赞记录的唯一标识符。</li><li><code>post_id</code>: 关联到点赞的文章。</li><li><code>user_id</code>: 点赞的用户。</li><li><code>created_at</code>: 点赞的时间。</li></ul><h4 id=18-权限表-roles>1.8 权限表 (Roles)</h4><p><strong>作用</strong>：存储系统中的权限角色（如管理员、普通用户等）。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> Roles (
</span></span><span style=display:flex><span>    role_id        INT AUTO_INCREMENT <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span>,
</span></span><span style=display:flex><span>    role_name      VARCHAR(<span style=color:#ae81ff>50</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>UNIQUE</span>
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><p><strong>字段解释</strong>：</p><ul><li><code>role_id</code>: 角色ID。</li><li><code>role_name</code>: 角色名称（如"管理员"、&ldquo;作者&rdquo;、&ldquo;读者"等）。</li></ul><h4 id=19-用户-角色关联表-user_roles>1.9 用户-角色关联表 (User_Roles)</h4><p><strong>作用</strong>：管理用户与角色的多对多关系。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> User_Roles (
</span></span><span style=display:flex><span>    user_id        INT,
</span></span><span style=display:flex><span>    role_id        INT,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span> (user_id, role_id),
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>FOREIGN</span> <span style=color:#66d9ef>KEY</span> (user_id) <span style=color:#66d9ef>REFERENCES</span> Users(user_id) <span style=color:#66d9ef>ON</span> <span style=color:#66d9ef>DELETE</span> <span style=color:#66d9ef>CASCADE</span>,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>FOREIGN</span> <span style=color:#66d9ef>KEY</span> (role_id) <span style=color:#66d9ef>REFERENCES</span> Roles(role_id) <span style=color:#66d9ef>ON</span> <span style=color:#66d9ef>DELETE</span> <span style=color:#66d9ef>CASCADE</span>
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><h3 id=2-数据库设计考虑事项>2. 数据库设计考虑事项</h3><ul><li><strong>索引设计</strong>：在查询频繁的字段上（如 <code>email</code>、<code>post_id</code>、<code>slug</code>）创建索引以提高查询性能。</li><li><strong>外键约束</strong>：合理设置外键约束，保证数据的完整性。例如，当一个用户被删除时，自动删除他所创建的文章或评论。</li><li><strong>分页与性能优化</strong>：对于大量数据的查询，尤其是文章、评论等表，使用分页查询来减少单次查询返回的数据量。</li><li><strong>全文检索</strong>：可以为 <code>Posts</code> 表中的 <code>title</code> 和 <code>content</code> 字段添加全文索引，支持用户在博客中进行关键词搜索。</li></ul><h3 id=3-其他功能扩展>3. 其他功能扩展</h3><ul><li><strong>文件存储</strong>：如果有图片上传需求，可以为 <code>Posts</code> 表或 <code>Users</code> 表添加图片路径字段，或者引入专门的文件管理表。</li><li><strong>浏览统计</strong>：可以为 <code>Posts</code> 表增加浏览计数 <code>view_count</code> 字段，并通过触发器或应用层逻辑更新文章的浏览次数。</li><li><strong>草稿与版本管理</strong>：可以为 <code>Posts</code> 表增加一个 <code>status</code> 字段，用于区分已发布和草稿的文章；还可以引入版本控制表来保存文章的历史版本。</li></ul><h3 id=4-关系图>4. 关系图</h3><ul><li><strong>用户</strong> (Users) 创建 <strong>文章</strong> (Posts)</li><li><strong>文章</strong> (Posts) 关联 <strong>分类</strong> (Categories) 和 <strong>标签</strong> (Tags)</li><li><strong>文章</strong> (Posts) 有 <strong>评论</strong> (Comments)</li><li><strong>文章</strong> (Posts) 被 <strong>用户</strong> (Users) 点赞</li><li><strong>用户</strong> (Users) 分配 <strong>角色</strong> (Roles)</li></ul><p>这种数据库设计能支持博客系统的多种功能，并能方便后期的扩展和性能优化。</p></p></section></article></article></div></div></div></main></div></body>